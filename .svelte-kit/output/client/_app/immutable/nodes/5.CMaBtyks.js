import{t as b,a as x,n as fe}from"../chunks/BhygiytR.js";import"../chunks/AyMsrB_a.js";import{p as ue,t as j,a as ye,s as o,c as t,r as a,g as e,m as z,n as B,b as n,f as xe,e as w,u as ge}from"../chunks/49846gV3.js";import{e as Q,s as k}from"../chunks/uxCHllH0.js";import{i as C}from"../chunks/7i1PPlP5.js";import{e as be,i as he,s as U}from"../chunks/CWfHPdAu.js";import{p as _e,r as P,b as N,a as we}from"../chunks/hFfBbPKR.js";import{i as Ce}from"../chunks/DDAExgub.js";var Pe=b("<div></div>"),ke=b('<div class="flex flex-col items-center"><div></div> <div class="text-xs mt-1 text-gray-500"></div></div> <!>',1),Ne=b('<div class="bg-red-50 border-l-4 border-red-400 p-4 mb-6"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-red-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><p class="text-sm text-red-700"> </p></div></div></div>'),Se=b('<div class="space-y-6"><div><label for="fullName" class="block text-sm font-medium text-gray-700">Full Name</label> <div class="mt-1"><input id="fullName" name="fullName" type="text" required class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"></div></div> <div><label for="email" class="block text-sm font-medium text-gray-700">Email address</label> <div class="mt-1"><input id="email" name="email" type="email" autocomplete="email" required class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"></div></div> <div><label for="phone" class="block text-sm font-medium text-gray-700">Phone Number</label> <div class="mt-1"><input id="phone" name="phone" type="tel" required class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"></div></div> <div><label for="referralCode" class="block text-sm font-medium text-gray-700">Referral Code (Optional)</label> <div class="mt-1"><input id="referralCode" name="referralCode" type="text" class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"></div></div></div>'),Te=b('<div class="space-y-6"><div><label for="password" class="block text-sm font-medium text-gray-700">Password</label> <div class="mt-1"><input id="password" name="password" type="password" required class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"></div> <p class="mt-1 text-xs text-gray-500">Password must be at least 8 characters long and include a mix of letters, numbers, and special characters.</p></div> <div><label for="confirmPassword" class="block text-sm font-medium text-gray-700">Confirm Password</label> <div class="mt-1"><input id="confirmPassword" name="confirmPassword" type="password" required class="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"></div></div></div>'),je=b('<div class="space-y-6"><div class="bg-gray-50 p-4 rounded-md"><h3 class="text-lg font-medium text-gray-900 mb-2">Review Your Information</h3> <div class="grid grid-cols-2 gap-4 text-sm"><div class="text-gray-500">Full Name:</div> <div> </div> <div class="text-gray-500">Email:</div> <div> </div> <div class="text-gray-500">Phone:</div> <div> </div> <div class="text-gray-500">Referral Code:</div> <div> </div></div></div> <div class="flex items-start"><div class="flex items-center h-5"><input id="agreeTerms" name="agreeTerms" type="checkbox" class="h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"></div> <div class="ml-3 text-sm"><label for="agreeTerms" class="font-medium text-gray-700">I agree to the <a href="/my/terms" class="text-primary-600 hover:text-primary-500">Terms and Conditions</a> and <a href="/my/privacy" class="text-primary-600 hover:text-primary-500">Privacy Policy</a></label></div></div></div>'),Me=b('<button type="button" class="inline-flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500">Back</button>'),qe=b("<div></div>"),Fe=fe('<svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),ze=b('<div class="min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8"><div class="sm:mx-auto sm:w-full sm:max-w-md"><div class="flex justify-center"><h1 class="text-3xl font-bold text-primary-700"><img src="/images/fefet-logo.png" alt="Fefet" class="w-12 h-12"></h1></div> <h2 class="mt-6 text-center text-3xl font-extrabold text-gray-900">Create your account</h2> <p class="mt-2 text-center text-sm text-gray-600">Malaysia Region</p></div> <div class="mt-8 sm:mx-auto sm:w-full sm:max-w-md"><div class="bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10"><div class="mb-8"><div class="flex items-center justify-between"></div></div> <!> <form><!> <!> <!> <div class="mt-6 flex items-center justify-between"><!> <button type="submit" class="inline-flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"><!> </button></div></form> <div class="mt-6 text-center"><p class="text-sm text-gray-600">Already have an account? <a href="/my/auth/login" class="font-medium text-primary-600 hover:text-primary-500">Sign in</a></p></div></div></div></div>');function Ye(W,X){ue(X,!1);let r=z({fullName:"",email:"",phone:"",password:"",confirmPassword:"",referralCode:"",agreeTerms:!1}),M=z(!1),m=z(""),v=z(1),q=3;const Z=()=>e(r).fullName?e(r).email?e(r).phone?!0:(n(m,"Please enter your phone number"),!1):(n(m,"Please enter your email address"),!1):(n(m,"Please enter your full name"),!1),ee=()=>e(r).password?e(r).password.length<8?(n(m,"Password must be at least 8 characters long"),!1):e(r).password!==e(r).confirmPassword?(n(m,"Passwords do not match"),!1):!0:(n(m,"Please enter a password"),!1),re=()=>e(r).agreeTerms?!0:(n(m,"You must agree to the terms and conditions"),!1),ae=()=>{n(m,""),e(v)===1&&Z()?n(v,2):e(v)===2&&ee()&&n(v,3)},te=()=>{n(m,""),e(v)>1&&ge(v,-1)},se=async()=>{if(n(m,""),!!re()){n(M,!0);try{const i=await(await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:e(r).fullName,email:e(r).email,phone:e(r).phone,password:e(r).password,referralCode:e(r).referralCode,region:"Malaysia"})})).json();if(!i.success)throw new Error(i.error||"Failed to register");window.location.href="/my/auth/verification"}catch(s){s instanceof Error?n(m,s.message):n(m,"Failed to register. Please try again."),n(M,!1)}}};Ce();var A=ze(),I=o(t(A),2),O=t(I),E=t(O),D=t(E);be(D,5,()=>Array(q),he,(s,i,d)=>{var c=ke(),l=xe(c),p=t(l);p.textContent=d+1;var u=o(p,2);u.textContent=d===0?"Personal Info":d===1?"Security":"Confirmation",a(l);var g=o(l,2);{var f=h=>{var _=Pe();j(()=>U(_,1,`flex-1 h-1 ${d+1<e(v)?"bg-primary-600":"bg-gray-300"}`)),x(h,_)};C(g,h=>{d<q-1&&h(f)})}j(()=>U(p,1,`w-8 h-8 flex items-center justify-center rounded-full border-2 ${d+1<=e(v)?"border-primary-600 bg-primary-600 text-white":"border-gray-300 text-gray-500"}`)),x(s,c)}),a(D),a(E);var Y=o(E,2);{var ie=s=>{var i=Ne(),d=t(i),c=o(t(d),2),l=t(c),p=t(l,!0);a(l),a(c),a(d),a(i),j(()=>k(p,e(m))),x(s,i)};C(Y,s=>{e(m)&&s(ie)})}var L=o(Y,2),H=t(L);{var oe=s=>{var i=Se(),d=t(i),c=o(t(d),2),l=t(c);P(l),a(c),a(d);var p=o(d,2),u=o(t(p),2),g=t(u);P(g),a(u),a(p);var f=o(p,2),h=o(t(f),2),_=t(h);P(_),a(h),a(f);var F=o(f,2),S=o(t(F),2),T=t(S);P(T),a(S),a(F),a(i),N(l,()=>e(r).fullName,y=>w(r,e(r).fullName=y)),N(g,()=>e(r).email,y=>w(r,e(r).email=y)),N(_,()=>e(r).phone,y=>w(r,e(r).phone=y)),N(T,()=>e(r).referralCode,y=>w(r,e(r).referralCode=y)),x(s,i)};C(H,s=>{e(v)===1&&s(oe)})}var J=o(H,2);{var de=s=>{var i=Te(),d=t(i),c=o(t(d),2),l=t(c);P(l),a(c),B(2),a(d);var p=o(d,2),u=o(t(p),2),g=t(u);P(g),a(u),a(p),a(i),N(l,()=>e(r).password,f=>w(r,e(r).password=f)),N(g,()=>e(r).confirmPassword,f=>w(r,e(r).confirmPassword=f)),x(s,i)};C(J,s=>{e(v)===2&&s(de)})}var V=o(J,2);{var le=s=>{var i=je(),d=t(i),c=o(t(d),2),l=o(t(c),2),p=t(l,!0);a(l);var u=o(l,4),g=t(u,!0);a(u);var f=o(u,4),h=t(f,!0);a(f);var _=o(f,4),F=t(_,!0);a(_),a(c),a(d);var S=o(d,2),T=t(S),y=t(T);P(y),a(T),B(2),a(S),a(i),j(()=>{k(p,e(r).fullName),k(g,e(r).email),k(h,e(r).phone),k(F,e(r).referralCode||"None")}),we(y,()=>e(r).agreeTerms,pe=>w(r,e(r).agreeTerms=pe)),x(s,i)};C(V,s=>{e(v)===3&&s(le)})}var $=o(V,2),G=t($);{var ne=s=>{var i=Me();Q("click",i,te),x(s,i)},me=s=>{var i=qe();x(s,i)};C(G,s=>{e(v)>1?s(ne):s(me,!1)})}var R=o(G,2),K=t(R);{var ve=s=>{var i=Fe();x(s,i)};C(K,s=>{e(M)&&s(ve)})}var ce=o(K);a(R),a($),a(L),B(2),a(O),a(I),a(A),j(()=>{R.disabled=e(M),k(ce,` ${(e(v)===q?"Create Account":"Next")??""}`)}),Q("submit",L,_e(function(...s){var i;(i=e(v)===q?se:ae)==null||i.apply(this,s)})),x(W,A),ye()}export{Ye as component};
